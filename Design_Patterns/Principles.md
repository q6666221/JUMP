#### 六大设计原则

- **开闭原则**：一个软件实体如类、模块和函数应该`对修改封闭，对扩展开放`。

- **单一职责原则**：一个类`只做一件事`，一个类应该只有一个引起它修改的原因。

- **里氏替换原则**：子类应该可以完全替换父类。也就是说在使用继承时，只扩展新功能，而不要破坏父类原有的功能。

  继承机制的==优点==

  - 代码共享，减少创建类的工作量
  - 提高代码的重用性
  - 子类可以形似父类，又异于父类
  - 提高父类的扩展性，实现父类的方法即可随意而为

  继承机制的==缺点==

  - 继承是入侵性的（只要继承，就必须拥有父类的所有属性与方法）
  - 降低了代码的灵活性（子类拥有了父类的属性方法，会增多约束）
  - 增强了耦合性（当父类的常量、变量、方法被修改时，必需要考虑子类的修改）

  > 违反里氏代换原则就是：子类重写了父类的方法
  >
  > 解决办法：取消原来的继承关系（并不是两个类的继承关系）
  > 创建一个新的类（最好是抽象类，接口）定义需要的方法，然后该父类与子类都重写

- **依赖倒置原则**：细节应该依赖于抽象，抽象不应依赖于细节。把抽象层放在程序设计的高层，并保持稳定，程序的细节变化由低层的实现层来完成。
  结：`将抽象的东西具体化`

  依赖倒置原则的==优点==

  - 可以通过抽象使各个类或模块的实现彼此独立，不互相影响，实现模块间的松耦合（也是本质）
  - 可以规避一些非技术因素引起的问题（项目大时，需求变化的概率也越大，通过采用依赖倒置原则设计的接口或抽象类对实现类进行约束，可以减少需求变化引起的工作量剧增情况。同时，发生人员变动，只要文档完善，也可让维护人员轻松地扩展和维护）
  - 可以促进并行开发（如，两个类之间有依赖关系，只要制定出两者之间的接口（或抽象类）就可以独立开发了，规范已经定好了，而且项目之间的单元测试也可以独立地运行，而TDD开发模式更是DIP的最高级应用（特别适合项目人员整体水平较低时使用））

  耦合是啥，内聚是啥

  - 耦合是指一级一级线性的继承方式，后者会继承前者的一切
    低耦合是指定义规范模板，统一继承模板，互相实现，互不干涉

  - 内聚是指实现多个模板，将多种功能组合到一个类中

  - 高内聚，低耦合是面向对象程序设计的规范

依赖的三种方式

- 接口依赖注入

  ```java
  public interface IDriver{
      // 是司机就应该会驾驶汽车
      public void drive(ICar car);
  }
  public class Driver implements IDriver{
      // 接口注入
      // 司机的主要职责就是驾驶汽车
      public void drive(ICar car){
          this.car.run();
      }
  }
  ```

- 构造方法依赖注入

  ```java
  public interface IDriver{
      // 是司机就应该会驾驶汽车
      public void drive();
  }
  public class Driver implements IDriver{
      private ICar car;
      // 构造函数注入
      public Driver(ICar _car){
          this.car = _car;
      }   
      // 司机的主要职责就是驾驶汽车
      public void drive(){
          this.car.run();
      }
  }
  ```

- Setter方法依赖注入

  ```java
  public interface IDriver {
      // 车辆型号
      public void setCar(ICar car);
      // 是司机就应该会驾驶汽车
      public void drive();
  }
  public class Driver implements IDriver{
      private ICar car;
      public void setCar(ICar car){
          this.car = car;
      }
      // 司机的主要职责就是驾驶汽车
      public void drive(){
          this.car.run();
      }
  }
  ```

  

- **`迪米特法则`**：又名“最少知道原则”，一个类不应知道自己操作的类的细节，换言之，只和朋友谈话，不和朋友的朋友谈话。
  结：类与类之间应该是线性关系，而不是树状关系

  注意

  > 迪米特法则的初衷是降低类之间的耦合，由于每个类都减少了不必要的依赖，因此的确可以降低耦合关系。但是凡事都有度，虽然可以避免与非直接的类通信，但是要通信，必然会通过一个“中介”来发生联系，例如本例中，总公司就是通过分公司这个“中介”来与分公司的员工发生联系的。过分的使用迪米特原则，会产生大量这样的中介和传递类，导致系统复杂度变大。所以在采用迪米特法则时要反复权衡，既做到结构清晰，又要高内聚低耦合。

- **接口隔离原则**：客户端不应依赖它不需要的接口。如果一个接口在实现时，部分方法由于冗余被客户端空实现，则应该将接口拆分，让实现类只需依赖自己需要的接口方法。